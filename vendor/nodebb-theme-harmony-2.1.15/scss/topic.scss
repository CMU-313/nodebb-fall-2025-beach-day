body.template-topic {
	.breadcrumb .breadcrumb-item:last-child {
		display: none;
	}
	.topic {
		.posts-container {
			max-width: 960px;
			width: 960px;
		}

		.posts {
			&.timeline {
				@include timeline-style;
			}

			.post-header {
				font-size: 0.8125rem;
				line-height: 1.25rem;

				.bookmarked {
					transition: $transition-fade;
				}
			}

			[component="post"] {
				&.selected .post-container {
					background-color: mix($body-bg, $body-color, 90%);
				}
				&.deleted .post-container .content { opacity: .65; }

				[component="post/content"] {
					@include fix-lists();

					> blockquote {
						> blockquote {
							> *:not(.blockquote) {
								display: none;
							}
						}

						> blockquote.uncollapsed {
							> *:not(.blockquote) {
								display: block;
							}
						}
					}

					@include media-breakpoint-up(lg) {
						table { // text-break breaks table formatting
						 	word-break:initial!important;
						}
					}
				}
			}

			[component="post/upvote"], [component="post/downvote"] {
				&.upvoted, &.downvoted {
					background-color: var(--btn-ghost-active-color);

					&:hover {
						background-color: var(--btn-ghost-hover-color);
					}
				}
			}
		}
	}

	.quick-reply {
		@include topic-avatars();
	}

	[component="post/parent"] {
		margin-left: 2.5rem;
		[component="post/parent/content"] > p:last-child {
			margin-bottom: 0;
		}
		&[data-collapsed="true"] {
			> [component="post/parent/content"] > * {
				font-size: 13px!important;
				line-height: var(--bs-btn-line-height)!important;
			}
		}
	}

	[component="post/replies/container"] {
		.icon {
			display: none !important;
		}

		.post-header .icon {
			display: initial !important;

			.status {
				display: none;
			}
		}

		.timeline-event {
			display: none !important;
		}

		[component="post"] {
			padding-top: 0 !important;
			padding-bottom: $spacer;
			&:last-of-type {
				padding-bottom: 0;
				.post-footer {
					padding-bottom: 0!important;
					border-bottom: none !important;
				}
			}
		}
	}


	[component="topic/thumb/list"] > a{
		height: calc($font-size-base * 4);
	}
}

@include media-breakpoint-up(lg) {
	body.template-topic {
		.topic .posts {
			[component="post"] {
				[component="post/actions"] {
					
					opacity: 0;
					transition: $transition-fade;

					// If the actions container itself contains an endorsed button, show it
					// Uses :has() (supported in modern browsers). See fallback below for
					// older browsers â€” the template can add a `.has-endorsed` class to
					// the post element when `posts.endorsed` is true.
					&:has([component="post/endrose"].endorsed) {
						opacity: 0;
						transition: $transition-fade;
					}

					&:has([aria-expanded="true"]) {
						opacity: 1;
					}
				}
				[component="post/actions"]:focus-within {
					opacity: 1;
				}

				// Fallback for browsers without :has(): if the template adds
				// `class="has-endorsed"` to the `[component="post"]` element when
				// the post is endorsed, this will also force the actions to be
				// visible. (Template-only solution; no JS required.)
				&.has-endorsed {
					> div > .post-container > [component="post/footer"] > div > [component="post/actions"] {
						opacity: 1;

						// Fallback: hide direct action anchors except endorse, keep votes
						> a:not([component="post/endrose"]) {
							opacity: 0;
							pointer-events: auto;
						}
						> .votes {
							opacity: 1;
							pointer-events: auto;
						}
						> .votes a:not([component="post/endrose"]) {
							opacity: 0;
							pointer-events: auto;
						}
						[component="post/endrose"],
						[component="post/endrose"] * {
							opacity: 1;
							pointer-events: auto;
						}

						// Hover fallback: when the post or actions area is hovered, restore
						// non-endorse anchors to their normal interactive state.
						> div > .post-container > [component="post/footer"] > div > [component="post/actions"]:hover > a:not([component="post/endrose"]),
						> div > .post-container > [component="post/footer"] > div > [component="post/actions"] > .votes:hover a:not([component="post/endrose"]){
							opacity: 1;
							pointer-events: auto;
						}
					}
				}

				&:hover {
					> div > .post-container > [component="post/footer"] > div > [component="post/actions"] {
						opacity: 1;
						transition: $transition-fade;

						> a:not([component="post/endrose"]) {
							opacity: 1;
							pointer-events: auto;
						}
						> .votes {
							opacity: 1;
							pointer-events: auto;
						}
						> .votes a:not([component="post/endrose"]) {
							opacity: 1;
							pointer-events: auto;
						}
						[component="post/endrose"],
						[component="post/endrose"] * {
							opacity: 1;
							pointer-events: auto;
						}
					}
				}
			}
		}
	}
}