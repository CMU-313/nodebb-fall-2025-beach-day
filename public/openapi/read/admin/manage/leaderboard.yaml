get:
  tags:
    - admin
  summary: Get category leaderboard overview
  description: Retrieve leaderboard metadata used by the ACP leaderboard page.
  parameters:
    - name: cid
      in: query
      description: Category identifier to query. If omitted, only metadata is returned.
      schema:
        type: integer
      example: 1
    - name: sortBy
      in: query
      description: Metric used to sort leaderboard rows.
      schema:
        type: string
        enum: [total, posts, topics]
        default: total
      example: total
    - name: order
      in: query
      description: Sort direction applied to the results.
      schema:
        type: string
        enum: [asc, desc]
        default: desc
      example: desc
    - name: limit
      in: query
      description: Maximum number of rows returned per page (1-200).
      schema:
        type: integer
        minimum: 1
        maximum: 200
        default: 50
      example: 50
    - name: page
      in: query
      description: Page number to return when paginating results.
      schema:
        type: integer
        minimum: 1
        default: 1
      example: 1
  responses:
    "200":
      description: ""
      content:
        application/json:
          schema:
            allOf:
              - type: object
                properties:
                  cid:
                    type: integer
                    nullable: true
                    description: Currently selected category identifier.
                  page:
                    type: integer
                  sortBy:
                    type: string
                  order:
                    type: string
                  limit:
                    type: integer
                  leaderboard:
                    type: object
                    properties:
                      cid:
                        type: integer
                        nullable: true
                      totalUsers:
                        type: integer
                      sortBy:
                        type: string
                      order:
                        type: string
                      start:
                        type: integer
                      limit:
                        type: integer
                      rows:
                        type: array
                        items:
                          type: object
                          properties:
                            uid:
                              type: integer
                            postCount:
                              type: integer
                            topicCount:
                              type: integer
                            totalCount:
                              type: integer
                            rank:
                              type: integer
                            user:
                              type: object
                              properties:
                                uid:
                                  type: integer
                                username:
                                  type: string
                                userslug:
                                  type: string
                                  nullable: true
                                picture:
                                  type: string
                                  nullable: true
                                displayname:
                                  type: string
                                  nullable: true
                                "icon:text":
                                  type: string
                                  description: Initial used for autogenerated avatar badges.
                                "icon:bgColor":
                                  type: string
                                  description: Hex colour value paired with icon:text.
                                isLocal:
                                  type: boolean
                  categoryName:
                    type: string
                    nullable: true
                  hasCategorySelected:
                    type: boolean
                  categoryMissing:
                    type: boolean
                  selectedCategory:
                    type: object
                    nullable: true
                  selectedCids:
                    type: array
                    items:
                      type: number
                  sortFields:
                    type: array
                    items:
                      type: string
                  limitOptions:
                    type: array
                    items:
                      type: number
                  state:
                    type: object
                    properties:
                      cid:
                        type: integer
                        nullable: true
                      sortBy:
                        type: string
                      order:
                        type: string
                      limit:
                        type: integer
                      page:
                        type: integer
              - $ref: ../../../components/schemas/Pagination.yaml#/Pagination
              - $ref: ../../../components/schemas/CommonProps.yaml#/CommonProps
          example:
            cid: 1
            page: 1
            sortBy: "total"
            order: "desc"
            limit: 50
            leaderboard:
              cid: 1
              totalUsers: 25
              sortBy: "total"
              order: "desc"
              start: 0
              limit: 50
              rows:
                - uid: 1
                  postCount: 15
                  topicCount: 8
                  totalCount: 23
                  rank: 1
                  user:
                    uid: 1
                    username: "admin"
                    userslug: "admin"
                    picture: null
                    displayname: "Administrator"
                    "icon:text": "A"
                    "icon:bgColor": "#f44336"
                    isLocal: true
                - uid: 2
                  postCount: 12
                  topicCount: 5
                  totalCount: 17
                  rank: 2
                  user:
                    uid: 2
                    username: "student1"
                    userslug: "student1"
                    picture: "/assets/uploads/profile.png"
                    displayname: "student1"
                    "icon:text": "S"
                    "icon:bgColor": "#9c27b0"
                    isLocal: true
            categoryName: "General Discussion"
            hasCategorySelected: true
            categoryMissing: false
            selectedCategory:
              cid: 1
              name: "General Discussion"
            selectedCids: [1]
            sortFields: ["total", "posts", "topics"]
            limitOptions: [10, 25, 50, 100, 200]
            state:
              cid: 1
              sortBy: "total"
              order: "desc"
              limit: 50
              page: 1
            pagination:
              pages:
                - page: 1
                  active: true
                  qs: "cid=1&sortBy=total&order=desc&limit=50&page=1"
              prev:
                page: 1
                active: false
                qs: "cid=1&sortBy=total&order=desc&limit=50&page=1"
              next:
                page: 1
                active: false
                qs: "cid=1&sortBy=total&order=desc&limit=50&page=1"
              first:
                page: 1
                active: true
                qs: "cid=1&sortBy=total&order=desc&limit=50&page=1"
              last:
                page: 1
                active: true
                qs: "cid=1&sortBy=total&order=desc&limit=50&page=1"
